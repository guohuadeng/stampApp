<?php ${"\x47L\x4f\x42\x41\x4cS"}["\x65\x6a\x6b\x76x\x67i\x64i"]="\x6fu\x74_tr\x61\x64e\x5f\x6e\x6f";${"\x47\x4c\x4f\x42A\x4c\x53"}["\x70\x79\x70\x67\x63\x77j\x76"]="\x74\x72\x61nsact\x69o\x6e_\x69d";${"\x47\x4c\x4f\x42A\x4cS"}["\x63q\x66\x6f\x71n"]="\x63\x6f\x64\x65";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x75\x6a\x6b\x65m\x6fbm\x76\x6a"]="\x72es";${"\x47\x4c\x4f\x42AL\x53"}["\x69\x6flv\x6f\x65\x6e\x65\x69x\x6e"]="r\x65\x73\x70\x6f\x6e\x73\x65\x41\x72r";${"G\x4cO\x42\x41LS"}["q\x6bvm\x6cq"]="\x72\x65\x73po\x6eseXm\x6c";${"\x47\x4cO\x42\x41\x4c\x53"}["\x73\x74\x79lbvb\x6bu\x72y\x66"]="\x72e\x71u\x65\x73tX\x4d\x4c";${"G\x4c\x4f\x42\x41\x4c\x53"}["f\x77kvv\x62"]="\x6a\x73o\x6e";${"G\x4c\x4f\x42A\x4c\x53"}["\x64t\x65\x70\x65\x6d\x72\x67"]="\x70\x72e\x70\x61\x79\x5fid";${"G\x4cO\x42\x41\x4c\x53"}["\x61\x65\x6c\x6e\x6b\x64\x71\x79\x6a\x68"]="\x6f\x72\x64er\x49\x64";${"G\x4cOB\x41\x4c\x53"}["\x68x\x6fh\x73o\x72\x79bff"]="r\x65\x64\x69\x72\x65\x63\x74\x5f\x75rl";${"G\x4c\x4fB\x41L\x53"}["\x78i\x6a\x69\x6e\x70m\x69\x6fb"]="\x6c\x65\x6egth";${"GLO\x42AL\x53"}["euj\x69\x72\x62\x77\x76\x70"]="i";${"\x47\x4cOB\x41\x4c\x53"}["yip\x75\x65y\x73\x6d\x68"]="\x69p";${"\x47L\x4f\x42A\x4c\x53"}["\x79hsg\x6c\x76\x66\x77w"]="\x65r\x72\x6f\x72";${"\x47LOB\x41\x4c\x53"}["\x67\x6f\x69r\x72w\x6b\x76"]="\x75\x72\x6c";${"\x47\x4cO\x42A\x4c\x53"}["\x71\x67\x66\x6eo\x65\x77\x6b"]="ti\x6de\x6fu\x74";${"\x47LO\x42\x41\x4cS"}["\x6f\x6fu\x6d\x6ff"]="\x63\x68";${"\x47L\x4f\x42\x41\x4c\x53"}["\x6f\x75k\x76x\x65\x6f\x6a\x70c"]="\x61rr";${"G\x4c\x4f\x42\x41L\x53"}["\x76\x79\x68\x71m\x76\x67\x75\x74"]="\x76\x61\x6c";${"G\x4c\x4fBAL\x53"}["sz\x79\x73\x6c\x78\x69gp"]="k\x65y";${"\x47LOB\x41\x4c\x53"}["\x70\x6c\x63\x63\x6bo\x74\x77\x67\x69"]="xm\x6c";${"\x47LO\x42\x41\x4c\x53"}["\x65q\x6a\x75\x6ak"]="u\x72l\x5f\x65\x6e\x63ode";${"\x47\x4c\x4fB\x41\x4c\x53"}["\x72\x61x\x65n\x6a\x6c\x63z"]="\x6b";${"\x47\x4cO\x42\x41\x4c\x53"}["\x71\x71\x76\x68\x71\x64\x73\x72\x75\x71"]="\x76";${"G\x4c\x4f\x42A\x4cS"}["i\x75\x74\x77\x65\x64s"]="s\x74r";${"G\x4cO\x42A\x4c\x53"}["\x66\x6fnl\x75h\x67cvr\x6a"]="\x6dy\x73\x69\x67\x6e";${"\x47L\x4f\x42\x41\x4c\x53"}["\x7a\x73\x79\x7a\x6b\x69\x72\x67\x71\x6f"]="\x73\x69\x67\x6e";${"\x47L\x4fB\x41LS"}["\x6f\x7af\x65\x68\x70\x69\x76"]="\x64a\x74a";${"\x47L\x4f\x42\x41\x4c\x53"}["\x66nqr\x67\x65x\x72x"]="p\x61\x72ams";${"\x47LOBAL\x53"}["\x6d\x76\x6d\x68\x78\x6bwh\x75\x77q"]="\x76a\x6cu\x65";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["vogm\x68k\x6dx"]="\x6e\x61\x6de";${"GLOB\x41\x4c\x53"}["\x78b\x72\x69cdao\x78"]="c\x6f\x6efig";class Alipaymate_WeixinMobile_Model_Core{const MODULE_PAYMENT_WEIXIN_PAY_URL="\x68\x74\x74p\x73://\x61p\x69.m\x63\x68.weix\x69n.\x71q\x2e\x63om/\x70a\x79/\x75n\x69\x66i\x65\x64o\x72d\x65\x72";const MODULE_PAYMENT_WEIXIN_OAUTH2_CODE_URL="\x68ttp\x73://open\x2ew\x65i\x78i\x6e\x2eq\x71\x2ec\x6fm/\x63\x6fnn\x65\x63t/\x6fa\x75th\x32/auth\x6f\x72i\x7ae?";const MODULE_PAYMENT_WEIXIN_OAUTH2_OPENID_URL="ht\x74\x70\x73://\x61p\x69.\x77\x65i\x78\x69\x6e.\x71\x71.\x63om/\x73n\x73/o\x61uth\x32/\x61\x63cess\x5ft\x6f\x6be\x6e?";const MODULE_PAYMENT_WEIXIN_PAY_ORDER_QUERY_URL="\x68t\x74\x70s://\x61\x70i.\x6d\x63h.\x77\x65\x69\x78\x69n.q\x71.c\x6fm/\x70\x61\x79/or\x64\x65rq\x75ery";private$_curl_timeout=30;private$_code=null;private$_helper;private$_config=array('notify_url'=>'','trade_type'=>'','appid'=>'','secret'=>'','mch_id'=>'','key'=>'','openid'=>'','device_info'=>'','nonce_str'=>'','sign'=>'','time_start'=>'','time_expire'=>'','limit_pay'=>'','spbill_create_ip'=>'');private$_bizparam=array('out_trade_no'=>'','body'=>'','detail'=>'','attach'=>'','fee_type'=>'','total_fee'=>'','goods_tag'=>'','product_id'=>'');public function __construct(){$this->getHelper();}public function getHelper(){if(!$this->_helper){$this->_helper=Mage::helper("w\x65i\x78\x69nm\x6f\x62i\x6c\x65");}return$this->_helper;}public function setConfig($config){${"\x47L\x4f\x42\x41\x4c\x53"}["\x68\x70p\x66\x69j\x6a\x6a\x67c\x76"]="\x76al\x75e";foreach(${${"G\x4cO\x42A\x4c\x53"}["x\x62\x72icd\x61\x6f\x78"]} as${${"G\x4c\x4f\x42\x41L\x53"}["v\x6f\x67\x6d\x68k\x6d\x78"]}=>${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x68p\x70\x66i\x6aj\x6ag\x63\x76"]}){if(array_key_exists(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["v\x6f\x67\x6d\x68\x6b\x6d\x78"]},$this->_config)){$this->_config[${${"\x47\x4c\x4f\x42\x41LS"}["\x76\x6f\x67m\x68\x6b\x6d\x78"]}]=trim(${${"\x47LO\x42A\x4c\x53"}["\x6d\x76\x6d\x68x\x6b\x77\x68\x75\x77q"]});}}}public function getConfig(){return$this->_config;}public function setBizParams($params){$rckquiyxsq="\x76\x61lu\x65";${"\x47\x4cOB\x41LS"}["\x76\x6d\x77\x70\x64gnv\x66"]="\x6e\x61\x6d\x65";foreach(${${"GLO\x42\x41L\x53"}["\x66\x6e\x71r\x67\x65\x78r\x78"]} as${${"G\x4cO\x42A\x4c\x53"}["v\x6d\x77\x70dgn\x76f"]}=>${$rckquiyxsq}){if(array_key_exists(${${"GL\x4f\x42AL\x53"}["\x76\x6fg\x6dh\x6b\x6d\x78"]},$this->_bizparam)){$nydeuf="\x6e\x61\x6d\x65";$this->_bizparam[${$nydeuf}]=trim(${${"\x47LOB\x41\x4c\x53"}["m\x76\x6dh\x78\x6b\x77h\x75\x77\x71"]});}}}public function verifyNotification($data){${"\x47\x4c\x4f\x42\x41L\x53"}["\x68v\x74\x77\x76\x77\x62dnvx"]="\x73i\x67\x6e";${"\x47L\x4f\x42A\x4c\x53"}["\x65i\x66\x73\x68\x6b\x79sddv"]="\x73\x69\x67\x6e";$xnzuvb="\x64\x61ta";${"\x47\x4cO\x42\x41L\x53"}["\x74\x61z\x73efx\x64\x74"]="\x64a\x74\x61";${"G\x4cO\x42\x41\x4cS"}["chhf\x77\x64v\x63"]="\x6d\x79\x73i\x67n";${${"G\x4cOBA\x4cS"}["\x65\x69\x66\x73\x68k\x79\x73\x64d\x76"]}=${$xnzuvb}["s\x69gn"];${"\x47\x4c\x4f\x42\x41\x4c\x53"}["r\x6c\x6b\x62f\x6a\x79\x6f\x64"]="\x6d\x79s\x69\x67\x6e";${${"\x47LO\x42\x41\x4cS"}["\x63\x68\x68f\x77\x64\x76\x63"]}=$this->makeSign(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6fz\x66eh\x70iv"]});$this->_helper->log("v\x65\x72if\x79\x4e\x6f\x74if\x69\x63a\x74\x69\x6fn",${${"\x47\x4c\x4f\x42A\x4c\x53"}["t\x61zse\x66\x78\x64\x74"]});$this->_helper->log("\x76e\x72i\x66\x79Noti\x66\x69\x63\x61\x74\x69o\x6e",array("si\x67\x6e"=>${${"G\x4c\x4f\x42\x41\x4cS"}["\x7a\x73\x79z\x6b\x69\x72g\x71\x6f"]},"my\x73i\x67\x6e"=>${${"\x47\x4c\x4f\x42\x41L\x53"}["\x72\x6c\x6bbfj\x79\x6fd"]}));if(${${"\x47L\x4f\x42\x41\x4cS"}["hvtw\x76wbdn\x76\x78"]}==${${"G\x4cO\x42\x41\x4c\x53"}["f\x6f\x6el\x75\x68g\x63\x76\x72\x6a"]}){return true;}return false;}public function makeSign($params,$url_encode=false){${"\x47\x4c\x4f\x42\x41L\x53"}["\x70q\x79m\x63x\x64\x63\x61g\x6c"]="\x70\x61\x72a\x6d\x73";$mpklhdarvka="p\x61rams";${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x69\x75t\x77\x65\x64\x73"]}="";$kswkgvhfkg="fil\x74er";$rgfbxjjpl="\x73\x74\x72";ksort(${${"\x47\x4cOB\x41\x4cS"}["p\x71y\x6d\x63\x78\x64\x63\x61\x67\x6c"]});${$kswkgvhfkg}=array("sig\x6e","\x6bey");${"GLO\x42\x41\x4c\x53"}["y\x6cu\x6fq\x79\x71"]="\x6b";foreach(${$mpklhdarvka} as${${"G\x4cO\x42\x41LS"}["y\x6c\x75\x6f\x71\x79\x71"]}=>${${"G\x4c\x4f\x42\x41L\x53"}["q\x71\x76\x68\x71\x64\x73\x72u\x71"]}){${"\x47\x4cOBAL\x53"}["\x6bvbm\x67\x70\x65"]="\x76";${"G\x4c\x4f\x42\x41L\x53"}["e\x6cm\x72\x6d\x67w\x76\x75\x66\x64\x71"]="\x66\x69\x6c\x74\x65\x72";if(in_array(${${"\x47\x4c\x4fB\x41L\x53"}["r\x61x\x65\x6ej\x6c\x63\x7a"]},${${"\x47\x4cO\x42\x41\x4c\x53"}["\x65\x6cm\x72mgw\x76\x75\x66\x64\x71"]})||${${"\x47\x4cO\x42\x41\x4c\x53"}["\x71\x71\x76\x68\x71d\x73\x72u\x71"]}==""){continue;}if(${${"\x47\x4c\x4f\x42ALS"}["e\x71\x6a\x75\x6ak"]}){$zkvmoviot="\x76";${$zkvmoviot}=urlencode(${${"\x47\x4c\x4fB\x41L\x53"}["q\x71v\x68q\x64\x73\x72u\x71"]});}${${"G\x4cO\x42\x41\x4c\x53"}["i\x75t\x77\x65d\x73"]}.=(${${"GL\x4fBA\x4c\x53"}["\x72\x61\x78en\x6a\x6cc\x7a"]}."\x3d".${${"\x47LOB\x41\x4c\x53"}["kvb\x6d\x67\x70\x65"]}."&");}${${"G\x4c\x4f\x42\x41L\x53"}["\x69\x75twe\x64\x73"]}.="k\x65y\x3d".$this->_config["ke\x79"];${${"G\x4c\x4fB\x41\x4cS"}["\x7as\x79\x7ak\x69\x72g\x71o"]}=strtoupper(md5(${$rgfbxjjpl}));return${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["z\x73y\x7a\x6bi\x72\x67\x71o"]};}public function convertArrayToXml($arr){$mexgjkefq="\x78m\x6c";${"\x47\x4cO\x42\x41\x4c\x53"}["\x64k\x6f\x78\x63\x6e\x61\x70\x73"]="a\x72\x72";${"G\x4c\x4f\x42\x41\x4c\x53"}["\x79pt\x6c\x66\x77\x6f\x68\x61o\x63"]="\x76a\x6c";${${"\x47L\x4fB\x41\x4c\x53"}["pl\x63c\x6b\x6ftw\x67\x69"]}="<\x78ml>";foreach(${${"\x47LOB\x41\x4c\x53"}["dk\x6f\x78\x63n\x61\x70\x73"]} as${${"G\x4cOB\x41\x4cS"}["\x73z\x79s\x6cxi\x67p"]}=>${${"\x47\x4cOB\x41\x4c\x53"}["\x79\x70tl\x66\x77\x6fha\x6fc"]}){$nwsxciqkusl="\x76\x61\x6c";$mkmwfsumtdm="\x76\x61\x6c";${$mkmwfsumtdm}=trim(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["v\x79\x68\x71m\x76\x67\x75\x74"]});$eummnztr="\x6b\x65y";if(empty(${${"\x47L\x4f\x42ALS"}["\x76y\x68q\x6d\x76\x67\x75\x74"]})||${${"\x47\x4cOBA\x4c\x53"}["s\x7a\x79\x73\x6c\x78ig\x70"]}=="\x6b\x65\x79"){continue;}if(is_numeric(${${"G\x4cO\x42AL\x53"}["v\x79\x68q\x6d\x76g\x75\x74"]})){$ifyiruny="\x6b\x65y";$bhtqjbst="\x76\x61l";$hfqhcduocytx="\x78ml";${$hfqhcduocytx}.="<".${$ifyiruny}."\x3e".${$bhtqjbst}."\x3c/".${${"G\x4c\x4f\x42\x41L\x53"}["s\x7a\x79s\x6c\x78\x69g\x70"]}.">";}else{${"\x47L\x4f\x42\x41\x4c\x53"}["\x6by\x68\x64ep\x79\x6f"]="x\x6dl";$rppsfxcisv="\x6be\x79";${${"\x47\x4c\x4f\x42\x41L\x53"}["\x6b\x79\x68d\x65p\x79\x6f"]}.="<".${${"\x47\x4cO\x42\x41\x4c\x53"}["\x73\x7a\x79\x73\x6cxigp"]}."><\x21[CD\x41T\x41[".${${"\x47\x4c\x4fBA\x4c\x53"}["v\x79\x68\x71mv\x67\x75\x74"]}."]]\x3e\x3c/".${$rppsfxcisv}."\x3e";}${${"\x47\x4c\x4fBA\x4c\x53"}["\x70\x6cc\x63ko\x74w\x67\x69"]}.="\x3c".${${"\x47\x4c\x4f\x42\x41LS"}["\x73\x7ays\x6c\x78ig\x70"]}.">".${$nwsxciqkusl}."\x3c/".${$eummnztr}."\x3e";}${$mexgjkefq}.="</\x78m\x6c\x3e";return trim(${${"\x47L\x4f\x42A\x4cS"}["\x70\x6c\x63c\x6bot\x77\x67i"]});}public function convertXmlToArray($xml){libxml_disable_entity_loader(true);${"\x47L\x4f\x42\x41\x4c\x53"}["\x63i\x70\x71\x65s\x76j"]="\x61r\x72";${${"\x47\x4cOB\x41\x4cS"}["o\x75k\x76x\x65\x6f\x6ap\x63"]}=json_decode(json_encode(simplexml_load_string(${${"\x47\x4c\x4fB\x41\x4c\x53"}["p\x6cc\x63k\x6f\x74\x77\x67\x69"]},"Si\x6dpl\x65\x58M\x4cEleme\x6e\x74",LIBXML_NOCDATA)),true);libxml_disable_entity_loader(false);return${${"\x47\x4cO\x42\x41L\x53"}["\x63ip\x71e\x73\x76\x6a"]};}private function postXmlCurl($xml,$url,$cert=false,$timeout=30){$jtlbajaxsr="\x63h";${$jtlbajaxsr}=curl_init();$vgqjvvg="\x63h";$qxfduvkxrkp="\x63\x68";${"\x47LOBA\x4cS"}["d\x72\x74\x72s\x76"]="xm\x6c";curl_setopt(${${"\x47L\x4fB\x41LS"}["\x6fo\x75\x6d\x6ff"]},CURLOPT_TIMEOUT,${${"\x47\x4c\x4f\x42A\x4cS"}["q\x67f\x6eo\x65wk"]});${"\x47L\x4f\x42AL\x53"}["\x6ccgi\x6d\x74\x68\x64"]="ur\x6c";$uhcgcvdw="\x64\x61\x74a";curl_setopt(${$vgqjvvg},CURLOPT_URL,${${"\x47L\x4fB\x41L\x53"}["go\x69r\x72\x77\x6b\x76"]});curl_setopt(${${"\x47\x4cO\x42AL\x53"}["o\x6fu\x6dof"]},CURLOPT_SSL_VERIFYPEER,FALSE);curl_setopt(${${"G\x4c\x4fB\x41\x4c\x53"}["\x6foumof"]},CURLOPT_SSL_VERIFYHOST,FALSE);curl_setopt(${${"\x47\x4cOB\x41L\x53"}["oo\x75m\x6f\x66"]},CURLOPT_HEADER,FALSE);curl_setopt(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6f\x6fu\x6d\x6f\x66"]},CURLOPT_RETURNTRANSFER,TRUE);curl_setopt(${${"\x47\x4c\x4f\x42\x41\x4cS"}["oo\x75mo\x66"]},CURLOPT_POST,TRUE);curl_setopt(${$qxfduvkxrkp},CURLOPT_POSTFIELDS,${${"\x47\x4c\x4f\x42A\x4cS"}["\x64\x72\x74\x72\x73\x76"]});$dligffvpcmm="\x63\x68";$this->_helper->log("\x70\x6fs\x74Xm\x6cC\x75r\x6c\x20\x75\x72l",${${"G\x4cOB\x41\x4c\x53"}["lc\x67i\x6d\x74\x68d"]});$this->_helper->log("po\x73t\x58m\x6cCu\x72l\x20\x78\x6dl",${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x70l\x63\x63k\x6f\x74\x77g\x69"]});${$uhcgcvdw}=curl_exec(${$dligffvpcmm});$this->_helper->log("post\x58\x6dlCu\x72l\x20\x72esp\x6fnse",${${"\x47\x4c\x4fB\x41L\x53"}["\x6fzfe\x68\x70iv"]});if(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6fz\x66\x65h\x70\x69\x76"]}){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x77\x67\x72\x6b\x75cc\x66\x6b"]="c\x68";curl_close(${${"G\x4c\x4fB\x41\x4c\x53"}["wg\x72\x6b\x75c\x63f\x6b"]});return${${"\x47LO\x42\x41\x4cS"}["o\x7af\x65\x68p\x69\x76"]};}else{${${"\x47L\x4f\x42\x41\x4cS"}["y\x68\x73gl\x76f\x77w"]}=curl_errno(${${"\x47L\x4f\x42\x41\x4cS"}["\x6f\x6fu\x6d\x6ff"]});curl_close(${${"\x47\x4cO\x42\x41\x4c\x53"}["o\x6fum\x6ff"]});return false;}return false;}public function ip(){${${"G\x4c\x4f\x42\x41L\x53"}["y\x69\x70\x75ey\x73\x6d\x68"]}=isset($_SERVER["R\x45\x4d\x4fTE_A\x44\x44R"])?$_SERVER["\x52E\x4dO\x54\x45\x5fA\x44\x44\x52"]:"";return${${"\x47\x4c\x4f\x42\x41LS"}["\x79ip\x75\x65\x79\x73\x6dh"]};}public function createNoncestr($length=32){$ikabcqcrc="\x73\x74\x72";$kntchluqlg="\x63ha\x72\x73";${$kntchluqlg}="a\x62\x63d\x65\x66\x67\x68ij\x6b\x6c\x6d\x6eopqrstuv\x77xyz0\x312\x3345\x36\x37\x389";${$ikabcqcrc}="";$mryfjvrm="\x69";for(${${"G\x4cO\x42AL\x53"}["\x65\x75\x6airbwv\x70"]}=0;${$mryfjvrm}<${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x69\x6a\x69\x6e\x70mio\x62"]};${${"GLO\x42\x41\x4c\x53"}["\x65u\x6a\x69\x72\x62\x77\x76p"]}++){$cftmpwf="\x73\x74\x72";${"\x47\x4c\x4f\x42\x41\x4cS"}["nd\x65i\x71\x66gm\x6b\x61\x6ce"]="ch\x61\x72\x73";${"\x47\x4c\x4fBALS"}["x\x77\x73\x66\x6b\x66b\x66s"]="\x63\x68a\x72\x73";${$cftmpwf}.=substr(${${"GL\x4f\x42A\x4c\x53"}["\x78\x77\x73\x66kf\x62f\x73"]},mt_rand(0,strlen(${${"G\x4cO\x42\x41\x4c\x53"}["n\x64\x65i\x71\x66g\x6d\x6b\x61l\x65"]})-1),1);}return${${"GL\x4f\x42\x41\x4c\x53"}["i\x75t\x77\x65\x64s"]};}public function postXmlSSLCurl($xml,$url,$timeout=30){${"\x47LOB\x41L\x53"}["im\x6c\x7a\x67\x79\x63"]="\x63\x68";${${"\x47\x4cO\x42\x41\x4c\x53"}["\x69\x6d\x6c\x7a\x67\x79\x63"]}=curl_init();${"\x47\x4c\x4fBAL\x53"}["\x65fv\x6d\x79\x71\x79\x65\x77"]="c\x68";${"\x47\x4c\x4fBA\x4cS"}["p\x63\x6cs\x6c\x76\x6f\x74t\x64\x76"]="\x63\x68";curl_setopt(${${"\x47\x4c\x4f\x42AL\x53"}["o\x6f\x75m\x6ff"]},CURLOPT_TIMEOUT,${${"\x47\x4c\x4fB\x41\x4cS"}["\x71\x67\x66\x6e\x6f\x65\x77\x6b"]});curl_setopt(${${"\x47\x4cO\x42A\x4c\x53"}["\x6fou\x6d\x6ff"]},CURLOPT_URL,${${"\x47LOB\x41\x4cS"}["\x67o\x69rrw\x6b\x76"]});curl_setopt(${${"\x47\x4cOBA\x4cS"}["\x6f\x6fum\x6ff"]},CURLOPT_SSL_VERIFYPEER,FALSE);curl_setopt(${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x6f\x6f\x75mo\x66"]},CURLOPT_SSL_VERIFYHOST,FALSE);curl_setopt(${${"\x47\x4c\x4fBA\x4c\x53"}["o\x6fu\x6do\x66"]},CURLOPT_HEADER,FALSE);curl_setopt(${${"G\x4c\x4fB\x41\x4c\x53"}["\x70\x63ls\x6cvott\x64\x76"]},CURLOPT_RETURNTRANSFER,TRUE);${"GL\x4f\x42A\x4cS"}["u\x6ejre\x69\x76\x6ej\x6fq"]="\x63h";curl_setopt(${${"\x47\x4cOBA\x4cS"}["\x75\x6e\x6ar\x65ivn\x6a\x6fq"]},CURLOPT_POST,true);curl_setopt(${${"\x47L\x4fBAL\x53"}["e\x66v\x6d\x79q\x79e\x77"]},CURLOPT_POSTFIELDS,${${"\x47L\x4fB\x41\x4c\x53"}["\x70\x6ccc\x6b\x6f\x74\x77\x67\x69"]});${${"G\x4cO\x42\x41L\x53"}["o\x7a\x66e\x68pi\x76"]}=curl_exec(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6fo\x75\x6d\x6f\x66"]});if(${${"\x47L\x4fB\x41\x4c\x53"}["\x6f\x7a\x66e\x68\x70iv"]}){$sbrsila="\x63\x68";curl_close(${$sbrsila});${"\x47\x4c\x4f\x42\x41\x4cS"}["\x74t\x69\x74\x6a\x74\x6a"]="d\x61\x74\x61";return${${"G\x4cOB\x41\x4c\x53"}["\x74t\x69t\x6at\x6a"]};}else{${"GLOB\x41\x4c\x53"}["u\x6a\x64\x63\x6eb\x6ehc\x75"]="c\x68";${${"\x47\x4c\x4fB\x41\x4cS"}["\x79\x68s\x67\x6c\x76\x66\x77w"]}=curl_errno(${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x6f\x6fu\x6do\x66"]});curl_close(${${"G\x4cOB\x41\x4cS"}["\x75\x6a\x64\x63\x6eb\x6ehc\x75"]});return false;}}public function createOauthUrlForCode($redirect_url=''){${"G\x4c\x4f\x42A\x4cS"}["\x6e\x67\x6a\x66hn\x77gf"]="url";$mxbylrljs="p\x61\x72\x61\x6d\x73";$oyccstxahl="\x70ar\x61\x6ds";$dejtsqca="ur\x6c";$kdokzz="s\x74\x72";${"\x47L\x4f\x42\x41\x4c\x53"}["\x6dp\x62\x76\x63i\x66"]="p\x61\x72\x61m\x73";if(empty(${${"\x47\x4cO\x42\x41LS"}["\x68xoh\x73\x6f\x72\x79\x62\x66f"]})){if(isset($_GET["\x72\x65p\x61\x79"])&&$_GET["\x72\x65pa\x79"]==1){$lafvaewcwkf="or\x64\x65\x72\x49\x64";${$lafvaewcwkf}=$this->_bizparam["o\x75t\x5ftra\x64\x65\x5f\x6eo"];${${"\x47LOBA\x4c\x53"}["hx\x6fh\x73o\x72\x79bf\x66"]}=$this->getJsApiCallUrl()."?orde\x72\x49\x64=".${${"\x47\x4c\x4fB\x41L\x53"}["\x61\x65\x6c\x6ekdq\x79\x6ah"]};${${"\x47L\x4f\x42\x41\x4c\x53"}["\x68\x78\x6fh\x73\x6f\x72\x79\x62\x66\x66"]}=urlencode(${${"\x47\x4cOBA\x4cS"}["hx\x6f\x68\x73\x6f\x72\x79\x62\x66f"]});}else{${"\x47LO\x42\x41\x4c\x53"}["\x62q\x73hmv\x6d\x71\x77"]="\x72\x65d\x69\x72\x65c\x74\x5f\x75rl";${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x62\x71\x73h\x6d\x76\x6d\x71\x77"]}=urlencode($this->getJsApiCallUrl());}}$yqcfruc="\x70\x61r\x61\x6d\x73";${${"G\x4c\x4f\x42\x41\x4c\x53"}["f\x6e\x71rg\x65xr\x78"]}["ap\x70id"]=$this->_config["\x61p\x70\x69\x64"];${"\x47\x4c\x4f\x42A\x4cS"}["\x74r\x72\x69\x6b\x69\x66\x76\x63"]="u\x72l";${${"\x47\x4c\x4f\x42A\x4cS"}["mpbvc\x69\x66"]}["redi\x72\x65\x63\x74_u\x72i"]=${${"\x47L\x4f\x42\x41\x4cS"}["\x68\x78\x6f\x68\x73o\x72\x79\x62\x66f"]};${"\x47\x4c\x4f\x42\x41L\x53"}["\x68ec\x69\x6ac\x78s"]="\x70\x61\x72a\x6d\x73";${$oyccstxahl}["\x72e\x73\x70o\x6ese_typ\x65"]="\x63\x6f\x64e";${${"\x47L\x4f\x42\x41\x4cS"}["\x66\x6eqr\x67\x65\x78\x72x"]}["\x73\x63\x6f\x70\x65"]="\x73\x6es\x61\x70\x69_\x62a\x73e";${${"G\x4c\x4fB\x41\x4c\x53"}["h\x65ci\x6ac\x78\x73"]}["s\x74\x61t\x65"]="S\x54A\x54\x45\x23\x77ec\x68\x61t\x5fred\x69\x72e\x63\x74";$this->_helper->log("cr\x65ate\x4f\x61ut\x68\x55\x72\x6c\x46o\x72Co\x64e\x20p\x61\x72a\x6ds",${$mxbylrljs});${${"G\x4c\x4f\x42\x41L\x53"}["iut\x77e\x64\x73"]}=$this->toUrlParams(${$yqcfruc},false);${$dejtsqca}=self::MODULE_PAYMENT_WEIXIN_OAUTH2_CODE_URL.${$kdokzz};$this->_helper->log("\x63r\x65at\x65O\x61ut\x68\x55\x72l\x46\x6frCode\x20\x75rl",${${"\x47L\x4f\x42\x41\x4c\x53"}["\x6e\x67\x6a\x66\x68\x6e\x77\x67f"]});return${${"\x47\x4c\x4fBA\x4cS"}["t\x72\x72\x69\x6b\x69\x66\x76\x63"]};}public function getJsApiCallUrl(){return Mage::getUrl("\x77\x65\x69xi\x6emob\x69le/p\x72\x6f\x63\x65s\x73\x69ng/r\x65direct",array("\x5f\x73\x65cu\x72e"=>true));}public function toUrlParams($params,$url_encode=false){$edfdckk="\x73tr";${"\x47LO\x42\x41L\x53"}["\x69\x6c\x6d\x64\x68\x77fb\x79\x6ep"]="\x76";$fgxhnxoinlw="\x70\x61\x72\x61ms";${$edfdckk}="";$vjhdrtxpw="s\x74r";$gnlxlhevpn="\x70a\x72am\x73";ksort(${$fgxhnxoinlw});foreach(${$gnlxlhevpn} as${${"\x47L\x4f\x42\x41\x4cS"}["r\x61\x78en\x6a\x6c\x63\x7a"]}=>${${"\x47\x4cO\x42\x41L\x53"}["\x69lm\x64\x68\x77f\x62y\x6ep"]}){$rbmdemkm="\x73\x74\x72";if(${${"\x47\x4cO\x42\x41L\x53"}["\x65\x71\x6a\x75\x6a\x6b"]}){${"\x47L\x4fBA\x4cS"}["\x63\x76\x78q\x69p\x78\x77"]="\x76";${${"\x47LO\x42A\x4c\x53"}["\x71\x71\x76\x68\x71\x64sr\x75q"]}=urlencode(${${"\x47L\x4fB\x41\x4c\x53"}["\x63v\x78\x71ip\x78w"]});}${$rbmdemkm}.=(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["ra\x78\x65\x6e\x6a\x6c\x63\x7a"]}."\x3d".${${"GL\x4f\x42\x41LS"}["\x71\x71v\x68q\x64\x73\x72\x75\x71"]}."\x26");}if(strlen(${${"\x47L\x4fBA\x4c\x53"}["\x69\x75t\x77\x65\x64\x73"]})>0){$xywvusgmn="st\x72";$ibsgiytru="s\x74\x72";${$ibsgiytru}=substr(${${"\x47\x4cOB\x41\x4cS"}["\x69u\x74\x77\x65ds"]},0,strlen(${$xywvusgmn})-1);}return${$vjhdrtxpw};}public function getJsApiParameters(){${"G\x4cO\x42\x41\x4c\x53"}["\x6a\x78\x74\x74\x61h\x6a\x6e"]="pa\x72\x61\x6d\x73";${"\x47\x4c\x4fBA\x4cS"}["\x72wf\x65hi\x73"]="\x70\x61ra\x6d\x73";${${"G\x4c\x4f\x42AL\x53"}["\x64t\x65p\x65\x6dr\x67"]}=$this->getPrePayId();${"G\x4c\x4fB\x41\x4c\x53"}["\x74\x6dk\x75\x77i\x6a\x6b\x62\x78\x6c"]="\x70a\x72a\x6d\x73";${"\x47\x4c\x4fBALS"}["f\x63\x68\x76\x6b\x61\x6c\x70\x65s"]="\x70\x61r\x61\x6d\x73";${"\x47\x4cOB\x41L\x53"}["x\x6c\x6f\x73\x6d\x71s\x76\x79\x74q\x67"]="\x6as\x6fn";${${"\x47\x4c\x4f\x42A\x4cS"}["tm\x6b\x75\x77\x69j\x6bb\x78\x6c"]}["\x61\x70\x70I\x64"]=$this->_config["a\x70\x70\x69d"];${"\x47\x4c\x4f\x42ALS"}["\x78j\x6c\x6f\x69h\x6b\x6a\x6ffmh"]="j\x73o\x6e";$mjiuflxwox="\x70\x61\x72\x61\x6d\x73";${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x72w\x66\x65h\x69s"]}["ti\x6d\x65S\x74\x61\x6d\x70"]="".time();$cfxjeawlx="\x70r\x65p\x61y\x5f\x69d";${${"\x47L\x4f\x42A\x4cS"}["f\x6e\x71\x72ge\x78\x72x"]}["non\x63\x65St\x72"]=$this->createNoncestr();${${"\x47\x4cO\x42\x41L\x53"}["\x66\x6eq\x72g\x65\x78\x72\x78"]}["p\x61\x63kag\x65"]="\x70\x72\x65\x70\x61\x79\x5f\x69d\x3d".${$cfxjeawlx};${"\x47L\x4f\x42\x41\x4c\x53"}["\x62\x62wt\x67x\x73h"]="\x70a\x72\x61\x6d\x73";${$mjiuflxwox}["\x73\x69gn\x54\x79\x70e"]="\x4d\x44\x35";${${"GL\x4f\x42\x41\x4c\x53"}["\x62b\x77\x74\x67\x78s\x68"]}["pa\x79S\x69g\x6e"]=$this->makeSign(${${"\x47\x4c\x4fB\x41L\x53"}["\x66\x63\x68v\x6b\x61l\x70\x65s"]});$this->_helper->log("\x67etJsA\x70\x69\x50\x61ra\x6dete\x72\x73\x20(\x70\x61\x72\x61\x6ds)",${${"\x47\x4cO\x42\x41\x4c\x53"}["\x6ax\x74\x74a\x68\x6a\x6e"]});${${"\x47\x4c\x4f\x42\x41\x4cS"}["xj\x6c\x6f\x69h\x6b\x6ao\x66\x6d\x68"]}=json_encode(${${"G\x4c\x4fB\x41L\x53"}["fn\x71\x72g\x65x\x72\x78"]});$this->_helper->log("\x67et\x4as\x41\x70\x69\x50ar\x61\x6de\x74\x65\x72\x73\x20(\x6a\x73\x6f\x6e\x20\x70ara\x6d\x73)",${${"\x47\x4cO\x42\x41L\x53"}["x\x6co\x73m\x71s\x76yt\x71g"]});return${${"\x47\x4c\x4fB\x41\x4c\x53"}["f\x77\x6b\x76\x76\x62"]};}public function getPrePayId(){$hxpcqefrp="\x72\x65\x73\x70on\x73eX\x6dl";${${"\x47\x4cO\x42\x41L\x53"}["\x67o\x69\x72\x72\x77kv"]}=self::MODULE_PAYMENT_WEIXIN_PAY_URL;${"\x47L\x4f\x42A\x4c\x53"}["\x64i\x6e\x6d\x72\x67"]="re\x73p\x6f\x6es\x65\x41\x72r";${${"G\x4cO\x42A\x4cS"}["st\x79\x6cb\x76\x62k\x75\x72\x79f"]}=$this->createPrePayRequestXML();$bfyvnfmlki="\x72e\x73\x70o\x6e\x73\x65\x41\x72\x72";${"\x47L\x4f\x42\x41LS"}["\x78b\x69\x69c\x69\x6b\x64\x73"]="r\x65q\x75\x65st\x58\x4d\x4c";$this->_helper->log("\x67\x65\x74Pr\x65Pa\x79Id (\x72eq\x75e\x73\x74\x58\x4dL)",${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x73\x74\x79l\x62\x76\x62\x6bu\x72y\x66"]});${"\x47\x4c\x4f\x42A\x4cS"}["\x79\x72\x79\x79w\x74\x68\x6ch"]="\x75r\x6c";${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x71\x6b\x76\x6d\x6c\x71"]}=$this->postXmlCurl(${${"\x47\x4cO\x42\x41\x4cS"}["x\x62\x69ici\x6bd\x73"]},${${"\x47L\x4f\x42\x41L\x53"}["yr\x79\x79\x77\x74\x68lh"]},false);$this->_helper->log("\x67e\x74\x50\x72ePay\x49\x64\x20(r\x65\x73\x70\x6f\x6e\x73eXml)",${$hxpcqefrp});${${"\x47\x4c\x4fBA\x4c\x53"}["\x64\x69nmr\x67"]}=$this->convertXmlToArray(${${"\x47\x4cO\x42ALS"}["\x71\x6b\x76\x6d\x6c\x71"]});$this->_helper->log("\x67e\x74Pr\x65\x50\x61yI\x64\x20(\x72espo\x6eseA\x72\x72)",${$bfyvnfmlki});$wunqssyojap="re\x73p\x6f\x6e\x73e\x41rr";if(isset(${$wunqssyojap}["pr\x65\x70ay\x5f\x69\x64"])){return${${"\x47LOBA\x4c\x53"}["\x69\x6f\x6c\x76\x6f\x65n\x65\x69xn"]}["prepa\x79\x5f\x69\x64"];}return false;}public function createPrePayRequestXML(){$dspumbd="\x64\x61\x74\x61";$inwguwxzqld="para\x6d\x73";$gujjfmwolhj="\x70ar\x61\x6d\x73";$gbyxde="d\x61t\x61";$mdqhyhdgxcpz="\x70\x61\x72a\x6d\x73";${$dspumbd}=array_merge($this->_config,$this->_bizparam);${"\x47LO\x42AL\x53"}["mz\x78s\x77p\x6c\x6c\x79"]="\x70a\x72\x61\x6ds";${$gujjfmwolhj}=array();${"\x47\x4cO\x42\x41\x4c\x53"}["\x70w\x6c\x62n\x63"]="\x70\x61\x72\x61\x6d\x73";${"\x47\x4c\x4fB\x41L\x53"}["\x78\x6bo\x71\x62\x63e"]="\x64\x61\x74\x61";${${"\x47LOB\x41\x4c\x53"}["mzx\x73wp\x6c\x6c\x79"]}["ap\x70\x69d"]=${${"\x47\x4cO\x42\x41\x4cS"}["\x6f\x7afe\x68p\x69v"]}["\x61pp\x69d"];${${"\x47L\x4f\x42A\x4c\x53"}["f\x6eqr\x67\x65x\x72x"]}["mc\x68_\x69\x64"]=${$gbyxde}["mch_\x69d"];${"\x47\x4c\x4fBA\x4c\x53"}["\x77o\x6d\x61\x78n\x73\x66\x6f\x79r"]="\x78\x6d\x6c";${"\x47\x4cOB\x41\x4c\x53"}["\x68\x6e\x71o\x6f\x66\x68"]="xm\x6c";${$mdqhyhdgxcpz}["\x73\x70\x62\x69\x6cl_c\x72e\x61te\x5f\x69\x70"]=$this->ip();${${"\x47\x4c\x4f\x42\x41\x4cS"}["f\x6e\x71\x72\x67e\x78\x72\x78"]}["\x6eo\x6e\x63e_\x73tr"]=$this->createNoncestr();$pugjjfy="d\x61\x74a";$bvenmct="p\x61\x72\x61m\x73";$dtkbtdf="d\x61\x74a";${${"\x47LOB\x41\x4c\x53"}["fn\x71r\x67\x65\x78\x72x"]}["o\x75\x74\x5ftr\x61d\x65_\x6eo"]=${${"GL\x4f\x42A\x4c\x53"}["\x6fz\x66\x65h\x70\x69v"]}["\x6fu\x74_t\x72ade\x5f\x6eo"];${"\x47\x4c\x4f\x42\x41L\x53"}["\x72\x70\x74g\x6bu\x62"]="\x70\x61\x72\x61\x6d\x73";${${"\x47LO\x42\x41\x4c\x53"}["p\x77l\x62n\x63"]}["\x62\x6f\x64\x79"]=${${"\x47\x4c\x4fB\x41L\x53"}["\x78\x6b\x6f\x71\x62\x63\x65"]}["b\x6fd\x79"];$zmtojrekmr="d\x61\x74\x61";${$bvenmct}["tota\x6c\x5f\x66\x65e"]=${$dtkbtdf}["t\x6fta\x6c_fe\x65"];${${"GL\x4f\x42A\x4cS"}["f\x6eqrg\x65x\x72\x78"]}["\x6eotif\x79\x5f\x75\x72l"]=${${"\x47\x4c\x4fBA\x4c\x53"}["\x6fz\x66eh\x70\x69\x76"]}["\x6e\x6f\x74i\x66y_u\x72\x6c"];${${"\x47\x4cOBA\x4c\x53"}["f\x6e\x71r\x67\x65xr\x78"]}["tra\x64\x65\x5ft\x79pe"]=${$zmtojrekmr}["t\x72\x61\x64e\x5ft\x79\x70\x65"];${${"\x47\x4c\x4fBA\x4cS"}["f\x6e\x71\x72\x67e\x78\x72x"]}["o\x70\x65nid"]=${$pugjjfy}["\x6fp\x65\x6ei\x64"];${${"\x47\x4cO\x42A\x4cS"}["\x66n\x71\x72\x67\x65\x78r\x78"]}["\x73i\x67\x6e"]=$this->makeSign(${${"G\x4c\x4f\x42A\x4cS"}["rpt\x67\x6b\x75\x62"]});${${"\x47\x4cO\x42\x41\x4c\x53"}["\x68n\x71\x6fo\x66\x68"]}=$this->convertArrayToXml(${$inwguwxzqld});return${${"\x47\x4cO\x42\x41L\x53"}["\x77\x6f\x6d\x61\x78\x6e\x73\x66\x6fyr"]};}public function getOpenid(){$djbnrfnkka="\x6f\x70\x65\x6eid";${"G\x4cO\x42\x41L\x53"}["\x73wk\x65h\x72k"]="op\x65n\x69\x64";${"G\x4c\x4fBAL\x53"}["\x70\x6a\x6cp\x76\x61l\x74"]="\x63\x6fde";$xtevck="c\x6f\x64e";${"\x47\x4c\x4fBA\x4c\x53"}["\x6a\x71\x70\x63x\x65j\x6a"]="\x6fp\x65n\x69\x64";if(!isset($_GET["co\x64e"])){${"GLOB\x41L\x53"}["h\x63\x64o\x66\x67\x6bdxv\x69"]="\x75r\x6c";${${"\x47LO\x42\x41L\x53"}["hc\x64\x6f\x66\x67\x6bd\x78\x76\x69"]}=$this->createOauthUrlForCode();header("L\x6fc\x61\x74\x69\x6f\x6e: $url");exit();}${$xtevck}=$_GET["co\x64e"];${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x73\x77\x6beh\x72k"]}=$this->GetOpenidFromMp(${${"\x47L\x4f\x42\x41LS"}["\x70\x6al\x70\x76\x61\x6ct"]});$this->_config["op\x65\x6e\x69d"]=${${"\x47\x4c\x4f\x42AL\x53"}["jqp\x63xe\x6a\x6a"]};return${$djbnrfnkka};}public function GetOpenidFromMp($code){${"G\x4cO\x42\x41\x4cS"}["n\x78\x75l\x75\x67\x6dk\x6e\x68\x6d\x62"]="\x63\x68";${"\x47LO\x42\x41\x4c\x53"}["\x6b\x6c\x6e\x6c\x63\x79\x77\x6ctn\x68"]="\x75\x72l";$ssycxtofqb="d\x61t\x61";$pcljsi="\x63h";$wgsmcl="\x63\x6fd\x65";$yyfdjsaqnyr="ope\x6eid";$hhbjiqiyx="\x63\x68";${${"\x47\x4c\x4f\x42\x41L\x53"}["kl\x6e\x6c\x63\x79w\x6c\x74n\x68"]}=$this->createOauthUrlForOpenid(${$wgsmcl});$sewudyw="c\x68";${$pcljsi}=curl_init();curl_setopt(${${"\x47\x4c\x4f\x42\x41LS"}["\x6f\x6f\x75\x6d\x6ff"]},CURLOPT_TIMEOUT,$this->_curl_timeout);${"G\x4c\x4fB\x41L\x53"}["zn\x65\x6cw\x75f\x70\x63"]="\x6f\x70en\x69\x64";${"\x47LO\x42\x41\x4c\x53"}["l\x6b\x67\x6d\x74\x78\x78w\x64\x63"]="\x72es";$vggwkqewhet="\x63\x68";curl_setopt(${${"G\x4cO\x42AL\x53"}["\x6e\x78u\x6c\x75\x67mknhmb"]},CURLOPT_URL,${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x67oi\x72r\x77\x6b\x76"]});${"\x47\x4c\x4f\x42\x41\x4cS"}["\x78o\x64b\x64\x6a\x73tr\x65t"]="\x6fpe\x6e\x69\x64";curl_setopt(${$hhbjiqiyx},CURLOPT_SSL_VERIFYPEER,FALSE);$ttqcrpyvst="\x6f\x70\x65\x6ei\x64";$vnpfljpypwic="\x63h";curl_setopt(${$sewudyw},CURLOPT_SSL_VERIFYHOST,FALSE);curl_setopt(${$vggwkqewhet},CURLOPT_HEADER,FALSE);curl_setopt(${${"\x47\x4c\x4f\x42\x41LS"}["\x6f\x6fu\x6d\x6f\x66"]},CURLOPT_RETURNTRANSFER,TRUE);${${"\x47LOB\x41L\x53"}["\x6c\x6b\x67\x6d\x74\x78\x78w\x64c"]}=curl_exec(${$vnpfljpypwic});curl_close(${${"G\x4cO\x42A\x4cS"}["\x6f\x6f\x75m\x6f\x66"]});$this->_helper->log("\x47\x65\x74\x4f\x70e\x6e\x69\x64From\x4dp\x20\x63\x75rl\x20re\x73\x75\x6cts",${${"\x47L\x4f\x42\x41\x4c\x53"}["u\x6ak\x65\x6d\x6f\x62\x6d\x76\x6a"]});${$yyfdjsaqnyr}="";if(${${"\x47\x4cO\x42\x41\x4c\x53"}["o\x7a\x66eh\x70\x69\x76"]}=json_decode(${${"\x47\x4c\x4f\x42\x41\x4cS"}["uj\x6bem\x6f\x62\x6d\x76\x6a"]},true)){${"GLO\x42\x41\x4c\x53"}["\x72\x6b\x75\x6d\x65\x71\x77\x6f\x74\x77\x70"]="\x64\x61\x74\x61";if(isset(${${"\x47\x4c\x4f\x42\x41LS"}["\x72\x6bu\x6de\x71\x77\x6ft\x77p"]}["openi\x64"])){$kjgkxtdyopm="da\x74\x61";${"G\x4cO\x42\x41\x4c\x53"}["\x7a\x67\x61i\x6c\x76u\x69\x74\x79h\x70"]="\x6f\x70\x65n\x69\x64";${${"G\x4c\x4fB\x41\x4cS"}["z\x67\x61i\x6c\x76\x75\x69\x74\x79\x68\x70"]}=${$kjgkxtdyopm}["\x6f\x70\x65\x6ei\x64"];}}$this->_helper->log("Ge\x74\x4f\x70eni\x64Fr\x6f\x6d\x4dp \x63ur\x6c \x72e\x73u\x6ct\x73(arr\x61\x79)",${$ssycxtofqb});$this->_helper->log("Get\x4f\x70eni\x64\x46\x72om\x4dp\x20\x63\x75\x72l\x20\x6fpenid",${${"\x47LOB\x41L\x53"}["\x7a\x6e\x65\x6c\x77u\x66\x70c"]});if(empty(${${"\x47\x4cOB\x41\x4c\x53"}["xo\x64b\x64\x6astre\x74"]})){return false;}return${$ttqcrpyvst};}public function createOauthUrlForOpenid($code){${"\x47\x4cOBA\x4c\x53"}["\x77\x76kqir\x76dw"]="pa\x72\x61\x6ds";$bicodlmtggw="\x75r\x6c";${"G\x4c\x4fB\x41\x4c\x53"}["ho\x68\x70m\x79\x78\x61\x67"]="\x73\x74r";${${"G\x4c\x4f\x42\x41\x4cS"}["\x66\x6e\x71\x72\x67e\x78\x72\x78"]}["a\x70pi\x64"]=$this->_config["\x61\x70p\x69d"];$ewnxtkgura="\x70a\x72\x61\x6d\x73";${"\x47\x4c\x4f\x42A\x4c\x53"}["m\x78\x79xy\x63e\x71\x66\x66\x69"]="ur\x6c";${${"G\x4cO\x42\x41\x4c\x53"}["f\x6e\x71rge\x78\x72\x78"]}["secret"]=$this->_config["sec\x72et"];${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x77\x76kqir\x76\x64\x77"]}["c\x6f\x64e"]=${${"\x47L\x4fB\x41\x4c\x53"}["\x63\x71\x66\x6f\x71\x6e"]};${${"\x47\x4c\x4f\x42A\x4c\x53"}["f\x6e\x71\x72\x67e\x78r\x78"]}["\x67\x72\x61n\x74\x5f\x74ype"]="\x61\x75tho\x72i\x7a\x61\x74\x69\x6f\x6e_\x63ode";$this->_helper->log("\x63\x72\x65at\x65\x4fau\x74hU\x72lFo\x72Op\x65\x6eid par\x61ms",${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["f\x6e\x71\x72\x67ex\x72\x78"]});${${"G\x4c\x4fB\x41\x4c\x53"}["\x69u\x74w\x65d\x73"]}=$this->toUrlParams(${$ewnxtkgura},false);${$bicodlmtggw}=self::MODULE_PAYMENT_WEIXIN_OAUTH2_OPENID_URL.${${"\x47L\x4fBA\x4c\x53"}["\x68\x6f\x68\x70\x6dy\x78\x61g"]};$this->_helper->log("\x63\x72\x65\x61\x74\x65\x4fa\x75thU\x72lFor\x4f\x70en\x69\x64\x20\x75rl",${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["m\x78\x79\x78\x79c\x65\x71\x66\x66\x69"]});return${${"\x47\x4cOB\x41\x4cS"}["g\x6f\x69\x72r\x77\x6bv"]};}public function paid($transaction_id,$out_trade_no=''){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x71f\x62wj\x62\x77\x71\x71\x7a\x72"]="t\x72\x61ns\x61cti\x6f\x6e_\x69\x64";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["wb\x64\x7aqt\x6aqg\x74"]="\x64a\x74a";$vfitmxell="\x75\x72l";$rguuxccjh="da\x74\x61";${"\x47\x4cO\x42\x41L\x53"}["x\x72ft\x6c\x6dx\x69o\x6a\x65w"]="u\x72l";${"\x47\x4c\x4f\x42\x41\x4cS"}["\x73je\x6d\x6a\x74\x75\x67"]="\x64ata";${${"\x47\x4cO\x42AL\x53"}["\x70\x79p\x67\x63\x77jv"]}=trim(${${"\x47\x4cOB\x41\x4c\x53"}["\x70yp\x67cwj\x76"]});$duubzhes="d\x61\x74\x61";${"\x47\x4c\x4f\x42A\x4c\x53"}["y\x6cxj\x6bc\x6ddgt\x63"]="\x72\x65\x73p\x6f\x6e\x73e\x41\x72\x72";$oncjzg="\x64\x61\x74\x61";$dlhfxvt="\x6fu\x74_\x74\x72\x61\x64\x65\x5f\x6e\x6f";${${"GL\x4f\x42\x41\x4cS"}["\x65j\x6b\x76x\x67\x69d\x69"]}=trim(${${"\x47L\x4f\x42\x41\x4c\x53"}["\x65\x6a\x6b\x76x\x67i\x64\x69"]});${"\x47\x4cO\x42A\x4c\x53"}["\x6b\x72c\x6c\x72\x73\x69t"]="\x72\x65\x71\x75e\x73t\x58\x4dL";if(empty(${${"\x47L\x4fB\x41\x4c\x53"}["\x70\x79\x70\x67\x63w\x6a\x76"]})&&empty(${$dlhfxvt})){return false;}${$duubzhes}=array();${${"GL\x4f\x42\x41L\x53"}["\x73j\x65mjt\x75\x67"]}["app\x69d"]=$this->_config["a\x70pid"];${${"\x47L\x4fBA\x4cS"}["\x77\x62\x64zqt\x6a\x71\x67t"]}["mch\x5fi\x64"]=$this->_config["mch_\x69\x64"];${$rguuxccjh}["n\x6f\x6e\x63\x65_\x73t\x72"]=$this->createNoncestr();$nszfuduji="da\x74a";if(!empty(${${"\x47LOB\x41LS"}["\x71f\x62w\x6a\x62\x77\x71q\x7ar"]})){$lqrisagp="\x74\x72an\x73a\x63ti\x6f\x6e\x5fi\x64";$qtqeixak="\x64\x61\x74\x61";${$qtqeixak}["\x74ra\x6esa\x63ti\x6f\x6e\x5fi\x64"]=${$lqrisagp};}else{$bftxqhw="ou\x74_\x74\x72\x61d\x65_\x6e\x6f";${${"\x47\x4c\x4f\x42A\x4c\x53"}["oz\x66ehp\x69\x76"]}["out\x5f\x74\x72\x61de_no"]=${$bftxqhw};}$slvcjocpoex="\x64\x61ta";ksort(${$slvcjocpoex});${"G\x4c\x4fB\x41\x4c\x53"}["\x6dbb\x6fm\x62\x66kn\x67nk"]="\x72e\x73\x70\x6f\x6e\x73\x65A\x72r";${$oncjzg}["s\x69g\x6e"]=$this->makeSign(${${"G\x4c\x4f\x42\x41\x4c\x53"}["ozf\x65\x68\x70\x69\x76"]});$this->_helper->log("\x71\x75er\x79\x4f\x72de\x72\x20(\x72eq\x75\x65\x73t\x20\x64a\x74a)",${${"\x47L\x4f\x42\x41\x4c\x53"}["\x6f\x7a\x66\x65\x68p\x69\x76"]});${${"\x47L\x4fBA\x4c\x53"}["\x78\x72\x66\x74\x6c\x6dx\x69\x6f\x6a\x65\x77"]}=self::MODULE_PAYMENT_WEIXIN_PAY_ORDER_QUERY_URL;${${"\x47\x4cOB\x41LS"}["s\x74\x79l\x62\x76\x62\x6b\x75\x72\x79f"]}=$this->convertArrayToXml(${$nszfuduji});${"GLOB\x41LS"}["v\x6cm\x62\x76\x78\x6b\x74qy"]="\x72\x65\x73\x70o\x6es\x65Ar\x72";$this->_helper->log("\x71\x75\x65ryO\x72\x64\x65\x72\x20(re\x71\x75es\x74 x\x6dl)",${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x73\x74\x79\x6c\x62\x76\x62\x6b\x75\x72\x79f"]});${${"\x47L\x4f\x42A\x4c\x53"}["\x71\x6b\x76\x6d\x6c\x71"]}=$this->postXmlCurl(${${"G\x4cOB\x41\x4cS"}["\x6br\x63\x6c\x72s\x69t"]},${$vfitmxell},false);$this->_helper->log("\x71u\x65\x72\x79\x4frd\x65r\x20(re\x73ponseXm\x6c)",${${"GL\x4f\x42\x41\x4c\x53"}["q\x6b\x76\x6dl\x71"]});${${"\x47L\x4fBA\x4cS"}["\x69\x6f\x6cvoe\x6e\x65\x69\x78\x6e"]}=$this->convertXmlToArray(${${"\x47\x4cO\x42\x41LS"}["q\x6b\x76m\x6c\x71"]});$this->_helper->log("\x71\x75\x65\x72yOrd\x65r\x20(res\x70\x6f\x6es\x65\x41r\x72)",${${"G\x4c\x4f\x42\x41\x4cS"}["\x79lxj\x6bc\x6d\x64g\x74\x63"]});if(isset(${${"\x47\x4cOBA\x4cS"}["m\x62\x62o\x6d\x62f\x6bn\x67\x6e\x6b"]}["\x74\x72\x61de_\x73ta\x74\x65"])&&${${"GLO\x42A\x4c\x53"}["\x76l\x6d\x62vxk\x74qy"]}["\x74\x72\x61\x64e_s\x74\x61t\x65"]=="\x53U\x43C\x45S\x53"){return true;}return false;}}
?>